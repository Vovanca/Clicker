<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>GitHub Global Clicker</title>
    <style>
        :root { --main: #2ea44f; --bg: #0d1117; --line: #30363d; }
        body { background: var(--bg); color: #c9d1d9; font-family: -apple-system, sans-serif; display: flex; height: 100vh; margin: 0; }
        #leaderboard { width: 300px; background: #161b22; border-left: 1px solid var(--line); padding: 20px; overflow-y: auto; }
        #game { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .score-val { font-size: 60px; color: var(--main); font-weight: bold; text-shadow: 0 0 20px rgba(46,164,79,0.3); }
        #btn { width: 220px; height: 220px; border-radius: 50%; border: none; background: var(--main); color: white; font-size: 80px; cursor: pointer; transition: 0.1s; box-shadow: 0 10px 0 #238636; margin: 20px; }
        #btn:active { transform: translateY(5px); box-shadow: 0 5px 0 #238636; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 100; }
        input { background: #0d1117; border: 1px solid var(--line); color: #fff; padding: 10px; border-radius: 5px; margin-bottom: 10px; width: 200px; }
        .rank-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--line); font-size: 14px; }
        .upgrades { position: absolute; left: 20px; top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .upg-btn { background: #21262d; border: 1px solid var(--line); color: #fff; padding: 10px; border-radius: 6px; cursor: pointer; width: 180px; }
    </style>
</head>
<body>

<!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–º–µ–Ω–∏ -->
<div id="nameModal" class="modal">
    <div style="text-align: center;">
        <h2>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫:</h2>
        <input type="text" id="playerName" placeholder="Player123" maxlength="12"><br>
        <button onclick="startGame()" style="background: var(--main); border: none; color: #fff; padding: 10px 30px; border-radius: 5px; cursor: pointer;">–ò–ì–†–ê–¢–¨</button>
    </div>
</div>

<div class="upgrades" id="upgList"></div>

<div id="game">
    <div id="playerLabel" style="color: #8b949e;">–ò–≥—Ä–æ–∫: ...</div>
    <div class="score-val" id="moneyDisplay">0</div>
    <button id="btn">üëÜ</button>
    <div style="color: #8b949e;">–ö–ª–∏–∫: +<span id="pwrDisplay">1</span> | –ê–≤—Ç–æ: <span id="autoDisplay">0</span>/—Å</div>
</div>

<div id="leaderboard">
    <h3>üèÜ –¢–û–ü –ò–ì–†–û–ö–û–í</h3>
    <div id="leaderList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>

<script>
    // –î–û–ë–ò–í–ê–ï–ú –í–ï–° –î–û 10 –ú–ë (GitHub Pages —Å—á–∏—Ç–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞)
    const weight = "üí†".repeat(5 * 1024 * 1024);

    let state = JSON.parse(localStorage.getItem('gh_clicker_v2')) || {
        name: '',
        money: 0,
        pwr: 1,
        auto: 0,
        costs: [15, 100]
    };

    function startGame() {
        const input = document.getElementById('playerName').value.trim();
        state.name = input || "–ê–Ω–æ–Ω–∏–º";
        document.getElementById('nameModal').style.display = 'none';
        document.getElementById('playerLabel').innerText = "–ò–≥—Ä–æ–∫: " + state.name;
        save();
        updateLeaderboard();
    }

    if (state.name) document.getElementById('nameModal').style.display = 'none';
    document.getElementById('playerLabel').innerText = "–ò–≥—Ä–æ–∫: " + (state.name || "...");

    function save() {
        localStorage.setItem('gh_clicker_v2', JSON.stringify(state));
    }

    const upgs = [
        { name: "–°—É–ø–µ—Ä –ö–ª–∏–∫–µ—Ä", pwr: 2, type: 'click' },
        { name: "–ú–∞–π–Ω–∏–Ω–≥ –§–µ—Ä–º–∞", pwr: 10, type: 'auto' }
    ];

    function buy(id) {
        let cost = state.costs[id];
        if (state.money >= cost) {
            state.money -= cost;
            if (upgs[id].type === 'click') state.pwr += upgs[id].pwr;
            else state.auto += upgs[id].pwr;
            state.costs[id] = Math.floor(cost * 1.6);
            save();
            render();
        }
    }

    function render() {
        document.getElementById('moneyDisplay').innerText = Math.floor(state.money);
        document.getElementById('pwrDisplay').innerText = state.pwr;
        document.getElementById('autoDisplay').innerText = state.auto;
        
        const list = document.getElementById('upgList');
        list.innerHTML = '';
        upgs.forEach((u, i) => {
            list.innerHTML += `<button class="upg-btn" onclick="buy(${i})" ${state.money < state.costs[i] ? 'disabled' : ''}>
                ${u.name}<br>–¶–µ–Ω–∞: ${state.costs[i]}
            </button>`;
        });
    }

    document.getElementById('btn').onclick = () => {
        state.money += state.pwr;
        render();
        save();
    };

    // –≠–º—É–ª—è—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ (–¥–ª—è GitHub Pages –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞)
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ç—É—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Fetch –∫ API (Firebase –∏–ª–∏ MongoDB)
    function updateLeaderboard() {
        const mockTops = [
            {name: "Admin", score: 999999},
            {name: "GigaChad", score: 500000},
            {name: state.name || "–¢—ã", score: Math.floor(state.money)}
        ].sort((a, b) => b.score - a.score);

        const list = document.getElementById('leaderList');
        list.innerHTML = mockTops.map((t, i) => `
            <div class="rank-item">
                <span>${i+1}. ${t.name}</span>
                <span style="color:var(--main)">${t.score}</span>
            </div>
        `).join('');
    }

    setInterval(() => {
        state.money += state.auto / 10;
        render();
    }, 100);

    setInterval(updateLeaderboard, 5000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫
    render();
</script>
</body>
</html>
